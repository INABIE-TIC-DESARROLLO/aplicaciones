<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- GOOGLE FONT -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@1,300&display=swap" rel="stylesheet">

        <!-- Bootrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

        <title>INABIE - Lote</title>

        <!-- ICON TITLE -->
        <link rel="shortcut icon" href="../../static/imagenes/logo.jpg">

        <!-- CSS PROVICIONAL -->
        <style>

            /* Pezonalizacion HTML */
            html{
                width: 100%;
                height: 100vh;
                margin: 0;
                padding: 0;
            }

            /* Perzonalizacion body */
            body{
                width: 100%;
                height: 100vh;
                background: #f5f4f4;
                            background: linear-gradient(to right, #d9112830, #3283f57d);
                margin: 0;
                padding: 0;
                font-family: sans-serif;}

            /* Background*/
            .backgroud{
                background-color: rgb(255, 255, 255);
            }

            /* Cambios al boton buscar lote */
            .change{
                margin-top: 24px;
                height: 40px;
            }

            /* cambiando el margin top de h6 */
            .margin-top-h6{
                margin-top: -8px;
            }

            /* Cambio cerrar sesion */
            .cerrar-sesion-top{
                margin-top: 10px;
                
            }

            /* Orzanizando las cajas centros de lote */
            .caja{
                display: flex;
                flex-wrap: wrap;
                width: 100%;
            }

            /* Tamaño de letra de los centros */
            .font-size-small{
                font-size: 1em;
                font-weight: normal;
            }

            /* Navbar evita desbordamiento */
            .nav_{
                width: 100%;
            }

            /* backgroud azul bandera dominicana */
            .backgroud_azul_inabie{
                background-color: #003970;
                color: white;
            }

            /* Transformacion a los li  */
            .lote-escuela{
                max-width: 30%;
                transform: scale(1);
                transition: transform .2s linear;
                cursor: pointer;
            }

            .lote-escuela:hover{
                transform: scale(1.2);
                transition: transform .2s ease;
                z-index: 1000;
            }

            /* font color */
            .font-color{
                color: #003970;
            }

            /* button color */
            .btn-color-blue{
                background-color: #003970;
                color: white;
            }
            .btn-color-blue:hover{
                background-color: #00213f;
                color: white;
            }

            /* Logo estilos */
            .logo{
                width: 400px;
            }

            @media(max-width: 575px) {
                .prueba_ {
                    width: 100%;
                    display: block;
                }
            }



        </style>


    </head>

    <body>

        <!-- NAVBAR -->
        <section>
            <nav class="navbar navbar-expand-md navbar-light bg-light static-top " style="max-width: 100%;">
                <div class="container-fluid">

                    <a class="navbar-brand" href="#" >
                        <!-- Img resposive  -->
                        <img class=" d-none d-sm-block" src="../../static/imagenes/logo-inabie-izquierda.png" height="100" style="margin-left: 60px;">
                        <img  class="d-block d-sm-none" src="../../static/imagenes/LOGO-MOSCA-02.png" height="80" style="margin-left: 60px;">
                    </a>


                    <!-- Tema -->
                    <div class="tema text-center d-none d-lg-block" style="width: 55%;">
                        <h2 class="fw-bold font-color">DEPARTAMENTO DE OPERACIONES</h2>
                        <h2 class="fw-bold font-color">Actualización de Raciones</h2>
                    </div>

                    <!-- Button hamburguesa para pantallas pequeñas -->
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse align-items-end justify-content-end" id="navbarSupportedContent" style="margin-right: 50px; width: 500px;">
                        <ul class="navbar-nav text-right">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">BIENVENIDO/A, {{user}}</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="/admin/logout"role="button">CERRAR SESIÓN</a>
                            </li>
                        </ul>
                    </div>

                </div>
            </nav>
        </section>


        <!-- BETA -->
        </section>
            <div class="container-fluid">
                <div class="row d-gri mx-auto">

                    <div class="col-auto col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 shadow my-5 ms-auto pb-5 rounded backgroud mb-5 prueba_">
                        <div class="text-center py-5">
                            <h2 class="fw-bold font-color mt-5 mt-sm-5">Datos del Lote</h2>
                            {% if  lote%}
                                <h3 class="fw-bold font-color mt-3 mt-sm-3">Proceso: {{proceso}} Lote: {{lote}}</h3>
                            {% endif %}
                            
                            
                        </div>
                    </div>

                    <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4 col-xxl-4 shadow me-auto my-5 ms-auto rounded backgroud">
                        <!-- Tema -->
                        <div class="text-center py-2">
                            <h2 class="fw-bold font-color mt-2" >Buscar Lote</h2>
                        </div>
                        <form action="" method="post" class="row justify-content-center py-3">
                            {% csrf_token %}

                            <div class="form-group col-md-3" style="width: 46%;">
                                <datalist id="nombre-proceso-datalist">
                                    {% for lote in lote_header %}
                                    
                                        <option>{{lote.proceso_no.proceso_no}}</option>
                                        
               
                                    {% endfor %}
                                </datalist>
                                <label for="numero-proceso" class="fw-bold form-label">Nombre proceso</label>
                                <input  type="search" id="nombre-proceso" name="nombre-proceso" list="nombre-proceso-datalist" class="form-control mb-2" placeholder="Nombre proceso" autofocus required>

                                
                            </div>

                            <!-- Numerolote -->
                            <div class="form-group col-md-3" style="width: 46%;">

                                <label for="numero-proceso" class="fw-bold form-label">Número de lote</label>
                                <input  type="search" id="numero-lote" name="numero-lote" class="form-control mb-2" placeholder="Numero de lote" required>

                                
                            </div>
                            <!-- Button -->
                            <input type="submit" class="btn col-md-2 btn shadow  fw-bold change btn-color-blue mb-1 mt-1 w-75" value="Buscar" name="buscar">
                        </form>
                    </div>
                </div>
            </div>
        <section>

        <section>
            <div class="container-fluid">
                <div class="row d-gri mx-auto">
                    
                    <!-- Centros del lote -->
                    <!-- Titulo -->
                    <div class="col-auto col-sm-12 col-md-12 col-lg-6 col-xl-6 col-xxl-6 shadow my-2 ms-auto rounded backgroud mb-5 prueba_">
                        <div class="text-center py-3">
                            <h2 class="fw-bold font-color">Centros Educativos Pertenecientes al Lote</h2>
                        </div>

                        <!-- Lista de centros que pertenecen a ese lote -->
                        <ul class="caja p-2 list-group list-group-horizontal justify-content-center">

                                <!-- Centro educativo -->
                                {% if escuelas_del_lote %}
                                    {% for escuela in escuelas_del_lote %}
                                        <li class="lote-escuela list-group-item d-flex justify-content-between align-items-start" id="{{escuela.centro_codigo.centro_codigo}}">
                                            <div class="fw-bold mb-1 me-auto">
                                                <p class="codigo-centro-lote"> {{escuela.centro_codigo.centro_codigo}} </p>
                                                <div class="mb-1 me-auto mt-2 font-size-small">
                                                    <p class="nombre-centro-lote"> {{escuela.centro_codigo.nombre}}</p>
                                                </div>
                                            </div>
                                            <!-- <span class="badge rounded-pill bg-primary mx-2" id="cantidad-raciones">{{escuela.raciones_diarias_estudiantes}}</span>
                                            <span class="badge rounded-pill bg-success mx-2" id="cantidad-raciones">{{escuela.raciones_diarias_administrativo}}</span> -->
                                            <span class="raciones-centro-lote badge rounded-pill backgroud_azul_inabie mx-3">{{escuela.raciones_diarias_total}}</span>
                                        </li>
                                    {% endfor %}
                                    
                                {% endif %}
                                
                        </ul>
                    </div>

                    <!-- Datos del lote -->
                    <div class="col col-sm-12 col-md-12 col-lg-4 col-xl-4 col-xxl-4 ms-auto shadow pb-4 my-2 rounded backgroud me-auto mx-5 ">
                        <div class="text-center py-3">
                            <h4 class="fw-bold font-color">Datos del Centro Educativo en Relación al Lote</h4>
                        </div>
                            <!-- Formulario -->
                            <form action="" method="post" class="row justify-content-start ps-4 mt-4">
                                {% csrf_token %}
                                <!-- Campo raciones -->
                                <div class="form-group  col-md-5 ">
                                    <label for="Raciones" class="fw-bold form-label text-center">Código</label>
                                    <input  type="text" class="form-control mb-2" name="codigo_centro_escolar" id="codigo-centro" placeholder="" required readonly>
                                </div>

                                <!-- Campo 2 -->
                                <div class="form-group col-md-5">
                                    <label for="" class="fw-bold form-label">Nombre</label>
                                    <input  type="text" class="form-control mb-2" name="nombre_centro_escolar" id="nombre-centro" placeholder="" required readonly>
                                </div>

                                <div class="form-group col-md-6">
                                    <label for="" class="fw-bold form-label">Proceso</label>
                                    <input  type="text" class="form-control mb-2" name="proceso_no" id="proceso_no" placeholder="" required readonly value="{{proceso}}">
                                </div>

                                <div class="form-group col-md-4">
                                    <label for="" class="fw-bold form-label">Lote</label>
                                    <input  type="text" class="form-control mb-2" name="lote_no" id="lote_no" placeholder="" required readonly value="{{lote}}">
                                </div>

                                <!-- Campo 2 -->
                                <!-- <div class="form-group col-md-5">
                                    <label for="" class="fw-bold form-label">Cantidad de raciones estudiantes</label>
                                    <input  type="text" class="form-control mb-2" name="cantidad-raciones" id="cantidad-raciones" placeholder="" autofocus>
                                </div>

                                <div class="form-group col-md-5">
                                    <label for="" class="fw-bold form-label">Cantidad de raciones administrativo</label>
                                    <input  type="text" class="form-control mb-2" name="cantidad-raciones" id="cantidad-raciones" placeholder="" autofocus>
                                </div> -->

                                <div class="form-group col-md-5">
                                    <label for="" class="fw-bold form-label">Cantidad de raciones total</label>
                                    <input  type="number" class="form-control mb-2" name="cantidad_raciones_total" id="raciones-centro" placeholder="" autofocus required>
                                </div>
                                <!-- Campo 5 -->
                                <div class="d-grid mt-2 px-5 ps-4">
                                    <input type="submit" class="btn fw-bold btn-color-blue" value="Guardar" name="guardar">
                                </div>
                            </form>
                    </div>
                    </div>
            </div>
        </section>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        <script>
            const escuelas = document.querySelectorAll(".lote-escuela")
            const codigoCentro = document.getElementById("codigo-centro")
            const nombreCentro = document.getElementById("nombre-centro")
            const racionesCentro = document.getElementById("raciones-centro")

            escuelas.forEach(escuela => {

                escuela.addEventListener("click", e => {
                    codigoCentro.value = escuela.querySelector(".codigo-centro-lote").textContent
                    nombreCentro.value = escuela.querySelector(".nombre-centro-lote").textContent
                    racionesCentro.value = escuela.querySelector(".raciones-centro-lote").textContent
                    
                });
                
            });
        </script>
    </body>
</html>